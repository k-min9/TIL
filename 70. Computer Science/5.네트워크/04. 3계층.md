# 3계층

## 개요

- 다른 네트워크 대역, 멀리 떨어진 네트워크까지 데이터를 전달할지 제어
- 발신에서 착신까지의 패킷 경로 제어

## IP 주소

- IPv4 : 현재 PC에 할당된 IP 주소
- 서브넷 마스크 : IP 주소에 대한 네트워크의 대역 규정, 네트워크 대역을 나누는데 사용하는 값
- 게이트웨이 주소 : 외부와 통신할 때 사용하는 네트워크 출입구
- 종류 : IPv4 , ARP, ICMP



통신에 필요한 최소 정보, 그리고 실제로는 도메인을 사용해서 IP 변환하고 통신



## IPv4

- 일반적인 IP 주소

- Classful IP
  - A클래스: 0으로 시작 : 0.0.0.0 ~ 127.255.255.255
  - B클래스: 10로 시작 : 128.0.0.0 ~ 191.255.255.255
  - C클래스: 110으로 시작 : 192.0.0.0 ~ 223.255.255.255
  - D클래스(멀티캐스트) : 1110으로시작 : 224.0.0.0 ~ 
  - E클래스(예약) : 11110으로 시작 : 240.0.0.0 ~ 
- Classifuless IP
  - 서브네팅 : Classful하게 썼더니 IP 부족 -> 서브넷 마스크를 도입, 1에서 0으로 바뀌는 곳이 나눠지는 곳

- 사설 IP + 공인 IP => NAT(Network Address Translation) : 공유기(Network Adapter)를 거쳐서 주소 변환
  - 공인 IP : 인터넷 세상에서 사용하는 IP
  - 사설 IP : 인터넷 같은 대역 내에서 사용하는 IP



## ARP

- 같은 네트워크 대역에서 통신할 때에도 캡슐화를 하기 때문에, IP 주소, MAC 주소가 모두 필요
  이때 IP 주소는 알고 MAC 주소는 모르더라도 ARP를 통해 통신이 가능하다.
- 보안상 중요하다. ARP 스푸핑 이슈



## ICMP

- Internet Control Message Protocol : 메시지, 오류 메시지 등을 전송 받는데 주로 쓰임
- 특정 대상과 내가 통신이 잘 되는지 확인하는데 사용



## IPv6 이슈

장점 : 4바이트 -> 16바이트로 증가해서 더 많은 표현이 가능

단점 : 기존 IPv4 방식의 장비를 다 바꿔야 함



## 특수한 IP 주소

- wildcard, 모든 남은 주소 : 0.0.0.0 
- 나 자신 : 127.0.0.1 
- 게이트웨이 주소 : 일반적으로 공유기 IP, 어딘가로 가려면 일단 여기로 이동
  - 공유기 wan 구멍 : 외부에서 오는 인터넷 연결



## 라우팅 테이블

- 배경 : 3계층의 주요역할 중 하나가 최적의 경로로 대상을 찾아가는 것
- 그 경로를 저장하고 어디로 보내야 하는지 설정되어 있는 것이 라우팅 테이블
- 일반적으로 와일드 카드에 게이트웨이 박아서 여기에 없는 주소면 일단 밖으로 보내라 라는 식으로 설정
