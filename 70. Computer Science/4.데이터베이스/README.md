# 개요

SQL 작성을 제외한 DB 계열 개념 요약 정리

## 인덱스

- 개요 : 검색 속도를 높이기 위해 사용하는 기술
- 방식 : 테이블의 레코드를 FULL SCAN 하는 게 아니라 색인화되어 있는 인덱스 파일을 검색
- 장단점
  - 장점
    - 테이블에서 검색과 정렬(Order by) 속도를 향상
      - Full Table Scan 방지
      - 효율적 Min, Max
    - 그룹화 작업의 속도를 향상
    - 테이블행의 고유성을 강화
  - 단점
    - 수정, 추가, 삭제 속도 감소
    - 인덱스를 위한 추가 공간 필요
    - 인덱스 생성시 시간 소요
- 생성 : 특정 컬럼을 기준으로 생성하고 기준이 된 컬럼으로 정렬된 Index 테이블이 생성
- 생성 전략
  - 조건절에 자주 등장하는 컬럼
  - 항상 = 으로 비교되는 컬럼
  - 중복되는 데이터가 최소한인 컬럼 (분포도가 좋은) 컬럼
  - ORDER BY 절에서 자주 사용되는 컬럼
  - 조인 조건으로 자주 사용되는 컬럼
- 문법
  - 생성 : CREATE INDEX [인덱스명] ON [테이블명](컬럼1, 컬럼2, 컬럼3.......)
  - 조회 : SELECT * FROM USER_INDEXES WHERE TABLE_NAME = 'CUSTOMERS'
  - 삭제 : DROP INDEX [인덱스 명]
  - 수정 : ALTER INDEX [기존 인덱스 명] TO [바뀔 인덱스 명]
  - 리빌드 : ALTER INDEX [인덱스명] REBUILD
    - 계속 생성, 삭제, 수정을 하다보면 인덱스의 효율이 감소함.
    깊이가 4쯤되면 리빌드 하는것이 효율이 좋다.
- 자료구조 : 가장 많이 사용하는 구조는 밸런스드 트리(B Tree)
  - B* Tree : 밸런스드 트리중에서도 많이 쓰임(주요 DBMS, 오라클), Root-Branch-Leaf 구조
    - Root : 일반적으로 중간 값. Min, Max Value를 가짐
    - Branch : Root를 중심으로 의해 나뉜 값들
    - Leaf : 인덱스의 키가 되는 데이터와 데이터의 물리적 주소 정보인 ROWID
- 결합 인덱스 : 두 개 이상의 컬럼을 합쳐서 인덱스를 만드는 것
  - 대상 : 단일 컬럼으로는 나쁜 분포도를 가지지만 여러 개의 컬럼을 합친다면 좋은 분포도를 가지고, Where절에서 AND 조건에 많이 사용되는 컬럼들
  - 순서결정 : B Tree의 구조상 순서가 매우 중요. 선언 순서대로 검색함
    - 주의 : 순서를 맞추더라도 Like 같은 넓은 범위나 중간에 빠진 where and 검색을 할 경우 Full Record Scan하는것이나 다름 없어진다.
