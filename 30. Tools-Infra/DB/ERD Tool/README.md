# ERD

시나리오에 맞는 논리 ERD를 작성해보자

## 시나리오 1

- 주어진 기초 테이블  
  ![테이블](Scenario1/2023-05-20-19-56-58.png)
- 공정은 공정코드로 식별한다. 공정은 공정명, 시험유무, 공정내용을 관리한다.
  - 별개 테이블을 만들어서 관리  
  ![테이블](Scenario1/2023-05-20-14-49-00.png)
- BOM은 완제품 또는 반제품을 만들기 위해 필요한 품목과 필요수량을 나열한 목록
  - Notation 정리
- BOM 정보는 BOM 번호로 식별하여 계층적으로 관리하며, BOM명과 적용규격을 포함한다.
  - BOM 번호를 식별자로 가지는 테이블 생성  
  - 식별자에 대해 상위BOM 번호를 재귀하여 계층적으로 관리
  ![테이블](Scenario1/2023-05-20-18-57-23.png)
- BOM 정보 상세 내용도 관리해야 하는데 반드시 하나 이상의 품목과 필요수량을 관리해야 한다.
  - 품목은 주어진 '테이블'이다. 반드시이니 식별(실선)로 연결될 필요가 있다.  
  ![테이블](Scenario1/2023-05-20-20-06-06.png)
- BOM 공정정보는 BOM 공정정보로 식별되어 BOM 공정명과 BOM 공정설명을 포함한다.
  - 테이블 생성  
  ![테이블](Scenario1/2023-05-20-20-12-48.png)
- 하나의 BOM 공정정보는 반드시 하나 이상의 공정을 포함하여야한다.
  - 공정은 '테이블'이다. 반드시이니 식별(실선)으로 연결될 필요가 있다.
- 공정 순서대로 BOM 공정상세 흐름이 관리되어야 한다. 하나의 공정상세 흐름에는 중복되는 공정이 없어야한다.
  - 공정순번을 추가한 중간테이블 BOM공정상세를 추가  
  ![테이블](Scenario1/2023-05-20-22-28-44.png)
- 하나의 BOM 공정정보는 여러 BOM 정보에서 사용될 수 있다.
  - 명확한 1대다연결(비식별/점선)  
  ![테이블](Scenario1/2023-05-20-22-29-54.png)
- 제품 주문이 발생하면(페이크) 제품별 생산수량을 관리하는 일별생산지시서에 기초(식별)하여 제품을 생산한다.
  - 익숙한 주문이라는 테이블을 만들 필요가 없다. 조심  
  ![테이블](Scenario1/2023-05-20-22-31-34.png)
- 모든 품목은 제품생산투입시 선입선출을 위해 창고번호와 입고일자별로 재고수량을 관리하여야 한다.
  - 창고번호와 입고일자가 식별자가 되는 이력테이블 작성  
  ![테이블](Scenario1/2023-05-20-22-33-38.png)
- 품목은 기본품목과, 반제품품목으로 구분되며 기본품목에는 안전재고수량, 반제품품목에는 BOM번호를 관리한다.  
제품과 반제품별로 각각에 해당하는 유일한 고유의 BOM 번호를 사용된다. >> 품목번호로 변환
  - 배타적 수퍼서브 관계, BOM 번호는 BOM정보의 PK이므로 연결하여 관리  
  ![테이블](Scenario1/2023-05-20-22-38-05.png)

## 시나리오 2

- 주어진 테이블
  - 컨텐츠가 삭제되거나 변경될 수 있는지 비식별로 연결  
  ![테이블](Scenario2/2023-05-21-11-50-55.png)
- 회원은 무료회원과 유료회원으로 구분.  
유료회원은 유료회원가입일시, 유료회원등급을 관리  
무료회원은 유료회원탈퇴일시를 관리
  - 배타적 수퍼서브 관계  
  ![테이블](Scenario2/2023-05-21-11-47-01.png)
- 컨텐츠 제작자는 유료회원만 등록 가능하고 제작자번호로 식별하며 등록일자, 제작자 별명을 관리
  - 새로운 테이블 생성
- 한 명의 유료회원은 여러 컨텐츠제작자로 활동이 가능
  - 비식별로 1:N  
  ![테이블](Scenario2/2023-05-21-12-17-49.png)
- 컨텐츠는 컨텐츠제작자가 주로 만들어 등록하나 업체가 직접 등록한 컨텐츠도 있음.
  - 비식별로 1:N  
  ![테이블](Scenario2/2023-05-21-12-18-57.png)
- 회원이 구독한 컨텐츠는 이력 보관을 위해 구독일시와 컨텐츠여부를 포함하여 컨텐츠구독이력으로 관리
  - 다대다인 회원과 컨텐츠간의 중간테이블로 구독이력을 추가  
  ![테이블](Scenario2/2023-05-21-12-23-38.png)
- 컨텐츠보관여부가 "Yes"로 표현되는 경우, 컨텐츠 보관함에 컨텐츠보관번호를 식별하여 컨텐츠보관일시를 포함하여 관리
  - 1대 N인 비식별연결 테이블 추가  
  ![테이블](Scenario2/2023-05-21-12-26-11.png)
- 회원은 컨텐츠제작자에 대해 구독신청할 수 있으며, 구독가입일시, 구독탈퇴일시와 함께 구독자로 관리한다.
  - 다대다인 회원과 컨텐츠제작자간의 중간테이블로 구독자 테이블을 추가. 놀랍게도 식별!!!!  
  ![테이블](Scenario2/2023-05-21-12-29-35.png)
- 회원은 컨텐츠에 댓글을 달 수 있으며, 댓글은 댓글일련번호로 식별하고, 작성일시와 댓글내용을 컨텐츠 댓글로 관리
  - 새로운 테이블. 회원이 삭제되어도 댓글은 남아있으니 비식별
  - 또한 회원은 기 작성된 댓글에 댓글을 달 수 있으며 = 상위댓글일련번호로 재귀  
  ![테이블](Scenario2/2023-05-21-12-37-08.png)
- 회원의 검색기록은 검색일시 검색어를 포함하여 관리한다.
  - 식별자 얘기가 없지만 테이블 추가. 식별자는 검색일지. 식별연결  
  ![테이블](Scenario2/2023-05-21-12-37-47.png)
