# 협업하기 좋은 코드

## 개요

- 나쁜 코드는 지속적인 생산성 하락과 관리비용 증가를 가져온다.
  - 시간이 없으니 나중으로 미루지만, 나중은 오지 않는게 현실
- 가독성의 기본 원리 : 코드는 다른 사람이 그것을 이해하는데 들이는 시간이 최소가 되도록 작성해야한다. 짧고 간결하게 의미 전달.

## 클린코드란?

부연설명이 필요없이 명료한 코드

- 개발 기간이 늘어나지 않고, 유지보수하기 쉬우며, 오류없는 정확한 프로그램을 만든다.
  - 전체 프로젝트에서 개발비는 20%, 유지보수비는 67% 정도
- 중학생도 이해할 수 있는 쉬운 변수명, 함수명, 클래스, 인터페이스 구축이 중요하다.
  - 퍼포먼스 추구를 위한 OOP 사용, temlplate, 디자인패턴 사용을 지양하는 것도 방법

1. 코드 가로 형식 : 적절한 들여쓰기, 띄어쓰기. 한 행 길이 120자 정도로 제한.
가로 스크롤 없는게 좋음
2. 코드 세로 형식 : 개행으로 개념 분리, 비슷한 개념을 가까이 배치. 호출되는 함수를 아래에 배치
중요한 개념을 위에 작성
3. 개발 전용 폰트 사용 : L과 1 등 폰트로 사용

- 자바스크립트는 Eslint같은 정적분석도구를 통해 형식을 강제하여 코드 퀄리티를 올릴 수 있다.
  - 코드의 보푸라기를 제거(lint)하여 유지보수를 쉽게 하고, 잠재적 오류 코드를 잡을 수 있음
- 처음부터 이쁜 코드를 적는것보다 일단 적고 이쁘게 꾸미는 것이 현실적이긴 하다.
  
## 이름 짓기

1. 클래스명, 변수명, 객체명은 명사나 명사구, 함수명은 업무적합한(get, set, is) 목적어를 가진 동사구를 활용
   - ex) 더하는 함수 : addition보다는 addNumbers
   - 변수명에 복수/단수 구별은 매우 중요 (getUsers가 getUserList 보다 보편적)
   - 전치사는 최대한 쓰지 않는다 : numOfUser보다 UserCount
2. 같은 기능이면 같은 동사를 사용한 일관성 있는 어휘 활용
   - 코드의 의도를 분명히 밝히는 단어 선택이 좋다.
   - ex) 가져온다 : get, fetch, retrieve 등 여러 단어를 쓰지 말고 하나를 선택
3. tmp, sum, num 같은 보편적 이름보다는 조금 길더라도 구체적이고 명확한 단어를 활용
   - 반대로 약어를 쓸때에는 보편적이라 이해되지 않는
4. 사전을 활용해보자
5. 발음하기 쉬운 이름
   - genYHMS -> generateDateTime
6. 불필요한 단어(noise word) 사양
   - XXXData, XXXInfo 과연 필요한 단어였을까?
7. 변수명에 단위 등 세부 정보 표시
   - createCache(int size) -> createCache(int sizeMb)
   - 경계값(min/max, first/last) : minLength, lastDate...

## 주석

목적 : 코드를 읽는 사람이 잘 이해하도록 하기 위한 수단
-> 이 목적을 잃고 혹시 몰라서... 하는 주석을 남기지 말자

1. 수정한 내용 주석 처리는 지양. 혹시나 몰라 하고 남긴 코드는 부정확한 정보로 변한다.
   - 다른 사람은 의미가 있어서 둔거겠지 하고 지우기 꺼려진다.
2. 블록이 길고 중첩이 심하면 닫는 괄호에 주석을 달자. 물론 블록을 줄이는게 베스트
3. 한눈에 파악하기 힘든 정규표현식 등에 의미를 명료하게 밝히는 주석을 달면 좋다.
4. 이력관리나 수정 저자 주석은 점차 쓸모 없어지니 형상관리도구를 사용하자.
5. 주석으로 설명하기 보다 코드 자체로 전달하면 좋다.
   - 코드에서 빠르게 유추할 수 있는 곳은 주석을 달지 말자
   - 나쁜 코드를 보완하기 위해 사용하지 말자. 좋은 코드 > 나쁜 코드 + 좋은 주석
6. 특정 위치를 눈에 띄게 하기 위한 주석을 쓰지 말자.
   - todo나 fixme 활용
7. 라이브러리나 외부 공개 API로 사용하게 되면, 주석을 꼼꼼히 만들어야 한다.

## 조건문과 반복문

1. 명료성을 위하여 조건식에서의 연산은 지양
2. 흐름 제어 변수보다는 break, countinue
3. 읽기 쉬운 조건문을 작성하자
   - 유동적인 값을 왼쪽에, 부정보다는 긍정으로 작성
4. Short-Circuit 로직(|| 등에서 앞이 true면 뒤를 안 보는 로직) 주의!

## 함수

코드를 작게 분리하면, 가독성과 재사용성이 높아짐
함수는 함수 이름에 맞게 기능 오직 하나만 수행할 수 있게 짜는 것이 좋음

1. 함수의 크기는 작게 : 코드대신 잘 명명된 최소단위 함수를 호출하도록 작성
2. 명령과 조회릘 분리 : 수행과 조회를 하나만 하도록 작성
3. 서술적인 함수명 : 함수가 하는 일을 잘 표현하기 위한 충분히 긴 이름

## 리팩토링

외견상 기능은 변하지 않으면서, 이해하기 쉽게 소프트웨어 내부적 구조를 변경

장점 : 설계 개선, 코드 쉽게 이해, 버그 탐색
시점 예시 : The rule of Three- 같은 문제가 세 번 발견 되었을 때

- 안전 리팩토링을 위한 3대 요소
  1) 백업/형상도구 활용
  2) 검증된 리팩토링 도구
  3) 자동화된 단위 테스트 생성으로 전/후의 기능 변경 체크

Refactoring Catalog : 어떤 코드를 어떻게 개선할 지 정리한 카탈로그

 1. Long Method : Extract Method로 해결
 2. Comments : why를 설명한다. 가능한 함수 이름으로 설명한다.
 3. 긴 파라미터 리스트 : 객체를 통해 정보를 전달. 결과를 보내는 함수를 거기서 호출하자
 4. 중복 코드 : pull-up-field. 상위 클래스 작성등의 객체적인 프로그래밍
 5. 기본형에 대한 압박 : 중복코드를 하나로 합치자.

기타

  1. Feature Envy : 다른 클래스의 data에 관심이 많음 - 함수를 옮기자.
  2. Shotgun surgery : 하나의 기능을 수정할때 여러 클래스를 수정해야 함. - 하나의 클래스로 옮기자, 과정에서 클래스를 통째로 옮기는 inline class도 고려
